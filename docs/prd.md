당신은 풀스택 웹 개발자입니다. 아래 요구사항에 따라 의류 쇼핑몰 MVP를 개발해주세요.

## 쇼핑몰 1차 MVP - PRD (Product Requirements Document)

## 📋 프로젝트 개요

### 목적

- **핵심 목표**: 최소 기능으로 빠른 시장 검증
- **검증 가설**: 간단한 구조와 적은 기능으로도 실제 구매 전환이 일어나는지 확인
- **출시 형태**: 테스트 결제 기능을 포함한 실동작 쇼핑몰

### 핵심 가치

- 옷 판매에 집중한 단순 명료한 쇼핑 경험
- 빠른 로그인/회원가입, 간편한 결제 프로세스

---

## 🎯 타겟 사용자

### Primary User

- **연령대**: 20-30대
- **특징**: 온라인 쇼핑에 익숙하고, 간편한 구매 프로세스를 선호

---

## 🏗️ 기술 스택

### Package Manager

- pnpm

### Frontend

- Next.js (React)

### Backend & Database

- Supabase (PostgreSQL)

### 인증

- Clerk (로그인/회원가입)
- Supabase에는 사용자 추가 정보만 저장
- supabase에 RLS는 사용하지 않습니다.

### 결제

- Toss Payments MCP
- 테스트 결제 모드로 운영

---

## 🚀 개발 우선순위

### Phase 1: 기본 인프라 ✅ 완료

- [x] Next.js 프로젝트 셋업 (Next.js 15, React 19, App Router)
- [x] Supabase 프로젝트 생성 및 테이블 스키마 작성
  - `products`, `cart_items`, `orders`, `order_items` 테이블 생성
  - RLS 비활성화 (개발 환경)
- [x] Clerk 연동 (회원가입/로그인)
  - Clerk + Supabase 네이티브 통합 설정
  - 한국어 로컬라이제이션 적용
- [x] 기본 레이아웃 및 라우팅
  - Root Layout (`app/layout.tsx`)
  - 네비게이션 바 (`components/Navbar.tsx`)
  - Clerk 미들웨어 설정

### Phase 2: 상품 기능 ✅ 완료

- [x] 홈페이지
  - 프로모션 섹션
  - 카테고리 진입 동선
  - 인기 상품 미리보기
- [x] 상품 목록 페이지
  - Grid 레이아웃
  - 페이지네이션
  - 정렬 기능 (생성일, 가격, 이름)
  - 카테고리 필터링
- [x] 상품 상세 페이지
  - 상품 정보 표시 (이름, 가격, 재고, 설명)
  - 장바구니 담기 기능
- [x] 어드민 상품 등록 (Supabase 직접)
  - 문서화 완료 (`docs/admin-product-management.md`)

### Phase 3: 장바구니 & 주문 ✅ 완료

- [x] 장바구니 기능
  - 상품 추가 (`addToCart`)
  - 수량 변경 (`updateCartItemQuantity`)
  - 상품 삭제 (`removeFromCart`)
  - 장바구니 조회 (`getCartItems`)
  - 장바구니 비우기 (`clearCart`)
- [x] 주문 프로세스 구현
  - 장바구니 검증 (`validateCartBeforeOrder`)
  - 주문 생성 (`createOrder`)
  - 배송 주소 입력 폼
  - 주문 메모 입력
- [x] 주문 테이블 연동
  - `orders` 테이블에 주문 정보 저장
  - `order_items` 테이블에 주문 상품 저장
  - 주문 총액 검증

### Phase 4: 결제 통합 ✅ 완료

- [x] Toss Payments 연동
  - `@tosspayments/payment-widget-sdk` 설치 및 설정
  - 결제 위젯 렌더링 (`components/payment/toss-payment-widget.tsx`)
  - 결제 요청 처리
- [x] 테스트 결제 구현
  - 테스트 모드 클라이언트 키 사용
  - 결제 성공/실패 콜백 처리
- [x] 결제 완료 후 주문 저장
  - 결제 성공 시 주문 상태 `confirmed`로 업데이트
  - 결제 실패 시 주문 상태 `cancelled`로 업데이트

### Phase 5: 마이페이지 ✅ 완료

- [x] 주문 내역 조회
  - 사용자별 주문 목록 조회 (`getUserOrders`)
  - 주문 카드 컴포넌트 (`components/orders/order-card.tsx`)
  - 빈 주문 내역 컴포넌트 (`components/orders/empty-orders.tsx`)
- [x] 주문 상세 보기
  - 주문 상세 정보 조회 (`getOrderById`)
  - 주문 상품 목록 표시
  - 배송 주소 정보 표시
  - 주문 요약 정보 표시

### Phase 6: 테스트 & 배포 ✅ 완료

- [x] 전체 플로우 테스트
  - Playwright E2E 테스트 설정
  - 인증 플로우 테스트
  - 상품 조회 플로우 테스트
  - 장바구니 플로우 테스트
  - 주문 및 결제 플로우 테스트
  - 주문 내역 조회 플로우 테스트
- [x] 버그 수정
  - Server Actions 예외처리 강화
  - 컴포넌트 에러 핸들링 개선
- [x] Vercel 배포
  - Vercel CLI 배포 설정
  - 환경 변수 문서화
  - 배포 체크리스트 작성

**총 개발 기간: 4주 (완료)**

---

## 📈 성공 지표 (MVP 검증 기준)

### 정량적 지표

- 회원가입 수: 최소 50명
- 실제 테스트 결제 시도: 최소 10건
- 결제 완료율: 50% 이상
- 장바구니 추가율: 방문자 대비 20%

### 정성적 지표

- 사용자 피드백 수집 (간단한 설문)
- 주요 개선 포인트 파악
- 기술 스택 검증 (Clerk + Supabase + Toss Payments 조합)

---

## 🚨 제약사항 및 주의사항

- Supabase RLS는 사용하지 않습니다 (서버 사이드에서 권한 체크)
- 어드민 기능은 MVP에 포함하지 않습니다 (상품 등록은 Supabase 대시보드에서 직접)
- 결제는 반드시 테스트 모드로만 운영
- 실제 배송 기능은 구현하지 않습니다 (주문 상태만 관리)
- 상품 리뷰, 찜하기, 쿠폰 등의 부가 기능은 제외

## 📦 개발 시작하기

1. 프로젝트 초기화부터 시작해주세요
2. 각 단계별로 완료 후 다음 단계로 진행해주세요
3. 코드는 깔끔하고 유지보수 가능하도록 작성해주세요
4. TypeScript를 사용해주세요
5. 에러 핸들링을 철저히 해주세요

## ✅ 구현 완료 현황

### 완료된 기능

**기본 인프라:**

- Next.js 15 + React 19 프로젝트 셋업
- Clerk 인증 시스템 (한국어 UI)
- Supabase 데이터베이스 연동
- Clerk + Supabase 네이티브 통합

**상품 기능:**

- 홈페이지 (프로모션, 카테고리, 인기 상품)
- 상품 목록 페이지 (Grid 레이아웃, 필터, 정렬, 페이지네이션)
- 상품 상세 페이지 (재고, 가격, 설명, 장바구니 담기)

**장바구니 & 주문:**

- 장바구니 CRUD 기능 (추가, 수량 변경, 삭제, 조회)
- 주문 생성 프로세스 (배송 주소 입력, 주문 메모)
- 주문 검증 및 저장

**결제 통합:**

- Toss Payments 위젯 연동
- 테스트 결제 모드 구현
- 결제 성공/실패 콜백 처리
- 주문 상태 자동 업데이트

**마이페이지:**

- 주문 내역 목록 조회
- 주문 상세 보기 (주문 상품, 배송 주소, 주문 요약)

**테스트 & 배포:**

- Playwright E2E 테스트 설정 및 작성
- 버그 수정 및 예외처리 강화
- Vercel 배포 설정 및 문서화

### 공통 작업 & 문서화 (진행 중)

- [x] 공통 로딩/에러/빈 상태 UI 컴포넌트 생성
- [x] 기존 페이지 및 컴포넌트에 공통 UI 상태 컴포넌트 적용
- [x] Zod 검증 스키마 작성 (주문, 장바구니)
- [x] 폼 컴포넌트에 Zod 검증 강화 적용
- [x] Server Actions에 Zod 검증 추가
- [x] README.md 업데이트 (E2E 테스트, 배포 가이드, 운영 가이드 링크 추가)
- [ ] PRD 문서 작성/업데이트 (프로젝트 요구사항, 기능 명세)
- [ ] 운영 가이드 작성 (환경 변수, 데이터베이스, 모니터링, 문제 해결)
- [ ] 개발 가이드 작성 (코드 스타일, 컴포넌트 작성, 테스트, Git 워크플로우)
- [ ] 접근성 점검 및 개선 (ARIA 속성, 키보드 네비게이션, 스크린 리더)
- [ ] 반응형 디자인 점검 및 개선 (모바일, 태블릿, 데스크톱)
- [ ] 다크모드 점검 및 개선 (CSS 변수, 색상 대비, 토글 기능)

## 📈 성공 지표 (MVP 검증 기준)

### 정량적 지표

- 회원가입 수: 최소 50명
- 실제 테스트 결제 시도: 최소 10건
- 결제 완료율: 50% 이상
- 장바구니 추가율: 방문자 대비 20%

### 정성적 지표

- 사용자 피드백 수집 (간단한 설문)
- 주요 개선 포인트 파악
- 기술 스택 검증 (Clerk + Supabase + Toss Payments 조합)

## 📚 관련 문서

- [README.md](../README.md) - 프로젝트 개요 및 시작 가이드
- [운영 가이드](operating-guide.md) - 환경 변수, 데이터베이스, 모니터링
- [개발 가이드](development-guide.md) - 코드 스타일, 컴포넌트 작성, 테스트
- [배포 가이드](vercel-deployment.md) - Vercel 배포 및 환경 변수 설정

---
